generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Company {
  id              BigInt           @id @default(autoincrement())
  name            String           @db.VarChar(191)
  identifier      String           @db.VarChar(191)
  short           String           @db.VarChar(191)
  createdAt       DateTime?        @map("created_at") @db.Timestamp(0)
  updatedAt       DateTime?        @updatedAt @map("updated_at") @db.Timestamp(0)
  deletedAt       DateTime?        @map("deleted_at") @db.Timestamp(0)
  stripeId        String?          @map("stripe_id") @db.VarChar(191)
  cardBrand       String?          @map("card_brand") @db.VarChar(191)
  cardLastFour    String?          @map("card_last_four") @db.VarChar(4)
  trialEndsAt     DateTime?        @map("trial_ends_at") @db.Timestamp(0)
  email           String?          @db.VarChar(191)
  codeName        String           @default("CÃ³digo") @map("code_name") @db.VarChar(191)
  codeDescription String?          @map("code_description") @db.VarChar(191)
  imageUrl        String?          @map("image_url") @db.VarChar(191)
  website         String?          @db.VarChar(191)
  watermarkUrl    String?          @map("watermark_url") @db.VarChar(191)
  maxUsers        Int              @default(0) @map("max_users")
  areas           Area[]
  boxes           Box[]
  correspondences Correspondence[]
  documents       Document[]
  externalUsers   ExternalUser[]
  proceedings     Proceeding[]
  retentions      Retention[]
  templates       Template[]
  users           User[]
  warehouses      Warehouse[]

  @@map("companies")
}

model User {
  id                                                           BigInt                 @id @default(autoincrement())
  name                                                         String                 @db.VarChar(191)
  email                                                        String                 @unique @db.VarChar(191)
  emailVerifiedAt                                              DateTime?              @map("email_verified_at") @db.Timestamp(0)
  password                                                     String                 @db.VarChar(191)
  rememberToken                                                String?                @map("remember_token") @db.VarChar(100)
  createdAt                                                    DateTime?              @map("created_at") @db.Timestamp(0)
  updatedAt                                                    DateTime?              @updatedAt @map("updated_at") @db.Timestamp(0)
  deletedAt                                                    DateTime?              @map("deleted_at") @db.Timestamp(0)
  companyId                                                    BigInt?                @map("company_id")
  phone                                                        String?                @db.VarChar(40)
  locale                                                       String?                @default("es") @db.VarChar(10)
  signature                                                    String?
  role                                                         String?                @db.VarChar(191)
  areaUsers                                                    AreaUser[]
  correspondence_threads_correspondence_threads_from_idTousers CorrespondenceThread[] @relation("correspondence_threads_from_idTousers")
  correspondence_threads_correspondence_threads_to_idTousers   CorrespondenceThread[] @relation("correspondence_threads_to_idTousers")
  correspondences_correspondences_recipient_idTousers          Correspondence[]       @relation("correspondences_recipient_idTousers")
  correspondences_correspondences_sender_idTousers             Correspondence[]       @relation("correspondences_sender_idTousers")
  proceedingThreadsAssigned                                    ProceedingThread[]     @relation("ProceedingThreadAssigned")
  proceedingThreadsFrom                                        ProceedingThread[]     @relation("ProceedingThreadFrom")
  company                                                      Company?               @relation(fields: [companyId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("users")
}

model Area {
  id                                                         BigInt           @id @default(autoincrement())
  companyId                                                  BigInt           @map("company_id")
  name                                                       String           @db.VarChar(191)
  code                                                       String           @db.VarChar(191)
  createdAt                                                  DateTime?        @map("created_at") @db.Timestamp(0)
  updatedAt                                                  DateTime?        @updatedAt @map("updated_at") @db.Timestamp(0)
  deletedAt                                                  DateTime?        @map("deleted_at") @db.Timestamp(0)
  areaUsers                                                  AreaUser[]
  company                                                    Company          @relation(fields: [companyId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  correspondences_correspondences_destination_area_idToareas Correspondence[] @relation("correspondences_destination_area_idToareas")
  correspondences_correspondences_origin_area_idToareas      Correspondence[] @relation("correspondences_origin_area_idToareas")
  retentions                                                 Retention[]

  @@map("areas")
}

model AreaUser {
  id        BigInt    @id @default(autoincrement())
  userId    BigInt    @map("user_id")
  areaId    BigInt    @map("area_id")
  createdAt DateTime? @map("created_at") @db.Timestamp(0)
  updatedAt DateTime? @updatedAt @map("updated_at") @db.Timestamp(0)
  deletedAt DateTime? @map("deleted_at") @db.Timestamp(0)
  area      Area      @relation(fields: [areaId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  user      User      @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("area_user")
}

model Retention {
  id             BigInt          @id @default(autoincrement())
  name           String          @db.VarChar(191)
  companyId      BigInt          @map("company_id")
  areaId         BigInt          @map("area_id")
  code           String          @db.VarChar(191)
  date           DateTime        @db.Date
  comments       String          @db.VarChar(191)
  createdAt      DateTime?       @map("created_at") @db.Timestamp(0)
  updatedAt      DateTime?       @updatedAt @map("updated_at") @db.Timestamp(0)
  deletedAt      DateTime?       @map("deleted_at") @db.Timestamp(0)
  retentionLines RetentionLine[]
  area           Area            @relation(fields: [areaId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  company        Company         @relation(fields: [companyId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("retentions")
}

model RetentionLine {
  id               BigInt       @id @default(autoincrement())
  retentionId      BigInt       @map("retention_id")
  series           String       @db.VarChar(191)
  subseries        String       @db.VarChar(191)
  documents        String
  code             String       @db.VarChar(191)
  localRetention   Int          @map("local_retention")
  centralRetention Int          @map("central_retention")
  dispositionCt    Boolean      @map("disposition_ct")
  dispositionE     Boolean      @map("disposition_e")
  dispositionM     Boolean      @map("disposition_m")
  dispositionD     Boolean      @map("disposition_d")
  dispositionS     Boolean      @map("disposition_s")
  comments         String
  createdAt        DateTime?    @map("created_at") @db.Timestamp(0)
  updatedAt        DateTime?    @updatedAt @map("updated_at") @db.Timestamp(0)
  deletedAt        DateTime?    @map("deleted_at") @db.Timestamp(0)
  proceedings      Proceeding[]
  retention        Retention    @relation(fields: [retentionId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("retention_lines")
}

model Proceeding {
  id                      BigInt                   @id @default(autoincrement())
  name                    String                   @db.VarChar(500)
  code                    String                   @db.VarChar(191)
  companyId               BigInt                   @map("company_id")
  retentionLineId         BigInt?                  @map("retention_line_id")
  startDate               DateTime                 @map("start_date") @db.Date
  endDate                 DateTime?                @map("end_date") @db.Date
  createdAt               DateTime?                @map("created_at") @db.Timestamp(0)
  updatedAt               DateTime?                @updatedAt @map("updated_at") @db.Timestamp(0)
  deletedAt               DateTime?                @map("deleted_at") @db.Timestamp(0)
  views                   Int                      @default(0)
  loan                    String                   @default("custody") @db.VarChar(255)
  companyOne              String?                  @map("company_one")
  companyTwo              String?                  @map("company_two")
  boxProceedings          BoxProceeding[]
  documentProceedings     DocumentProceeding[]
  externalUserProceedings ExternalUserProceeding[]
  proceedingThreads       ProceedingThread[]
  company                 Company                  @relation(fields: [companyId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  retentionLine           RetentionLine?           @relation(fields: [retentionLineId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("proceedings")
}

model Correspondence {
  id                                               BigInt                    @id @default(autoincrement())
  title                                            String                    @db.VarChar(191)
  comments                                         String?
  answer                                           String?
  in_settled                                       String                    @db.VarChar(191)
  out_settled                                      String?                   @db.VarChar(191)
  status                                           String                    @default("registered") @db.VarChar(191)
  user_type                                        String                    @db.VarChar(191)
  user_id                                          Int
  correspondenceTypeId                             Int?                      @map("correspondence_type_id")
  companyId                                        BigInt                    @map("company_id")
  createdAt                                        DateTime?                 @map("created_at") @db.Timestamp(0)
  updatedAt                                        DateTime?                 @updatedAt @map("updated_at") @db.Timestamp(0)
  deletedAt                                        DateTime?                 @map("deleted_at") @db.Timestamp(0)
  code                                             String?                   @db.VarChar(191)
  physical_delivered                               Boolean                   @default(false)
  type                                             String                    @default("general") @db.VarChar(255)
  tracking_number                                  String?                   @unique @db.VarChar(255)
  content                                          String?
  priority                                         String?                   @default("medium")
  received_at                                      DateTime?                 @db.Timestamp(6)
  sender_id                                        BigInt?
  recipient_id                                     BigInt?
  origin_area_id                                   BigInt?
  destination_area_id                              BigInt?
  attachments                                      Json?                     @db.Json
  correspondence_document                          correspondence_document[]
  threads                                          CorrespondenceThread[]
  company                                          Company                   @relation(fields: [companyId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  areas_correspondences_destination_area_idToareas Area?                     @relation("correspondences_destination_area_idToareas", fields: [destination_area_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_correspondences_destination")
  areas_correspondences_origin_area_idToareas      Area?                     @relation("correspondences_origin_area_idToareas", fields: [origin_area_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_correspondences_origin")
  users_correspondences_recipient_idTousers        User?                     @relation("correspondences_recipient_idTousers", fields: [recipient_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_correspondences_recipient")
  users_correspondences_sender_idTousers           User?                     @relation("correspondences_sender_idTousers", fields: [sender_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_correspondences_sender")
  sentEmails                                       SentEmail[]

  @@map("correspondences")
}

model CorrespondenceThread {
  id                                          BigInt         @id @default(autoincrement())
  correspondenceId                            BigInt         @map("correspondence_id")
  from_id                                     BigInt
  to_id                                       BigInt?
  message                                     String
  answer                                      String?
  createdAt                                   DateTime?      @map("created_at") @db.Timestamp(0)
  updatedAt                                   DateTime?      @updatedAt @map("updated_at") @db.Timestamp(0)
  deletedAt                                   DateTime?      @map("deleted_at") @db.Timestamp(0)
  correspondence                              Correspondence @relation(fields: [correspondenceId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users_correspondence_threads_from_idTousers User           @relation("correspondence_threads_from_idTousers", fields: [from_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users_correspondence_threads_to_idTousers   User?          @relation("correspondence_threads_to_idTousers", fields: [to_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("correspondence_threads")
}

model Document {
  id                      BigInt                    @id @default(autoincrement())
  companyId               BigInt                    @map("company_id")
  name                    String                    @db.VarChar(600)
  file                    String?                   @db.VarChar(600)
  fileSize                Float?                    @map("file_size")
  filePages               Int?                      @map("file_pages")
  medium                  String                    @db.VarChar(49)
  documentDate            DateTime?                 @map("document_date") @db.Date
  meta                    Json?                     @db.Json
  textMeta                String?                   @map("text_meta")
  textMetaExtract         String?                   @map("text_meta_extract")
  notes                   String?
  createdAt               DateTime?                 @map("created_at") @db.Timestamp(0)
  updatedAt               DateTime?                 @updatedAt @map("updated_at") @db.Timestamp(0)
  deletedAt               DateTime?                 @map("deleted_at") @db.Timestamp(0)
  file_original_name      String?                   @db.VarChar(191)
  views                   Int                       @default(0)
  entities                Json?                     @db.Json
  correspondence_document correspondence_document[]
  documentProceedings     DocumentProceeding[]
  textracts               DocumentTextract[]
  company                 Company                   @relation(fields: [companyId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("documents")
}

model Entity {
  id                 BigInt    @id @default(autoincrement())
  entity_category_id BigInt
  name               String    @db.VarChar(191)
  identification     String    @db.VarChar(191)
  meta               Json      @db.Json
  createdAt          DateTime? @map("created_at") @db.Timestamp(0)
  updatedAt          DateTime? @updatedAt @map("updated_at") @db.Timestamp(0)
  deletedAt          DateTime? @map("deleted_at") @db.Timestamp(0)

  @@map("entities")
}

model Warehouse {
  id            BigInt          @id @default(autoincrement())
  companyId     BigInt          @map("company_id")
  name          String          @db.VarChar(191)
  createdAt     DateTime?       @map("created_at") @db.Timestamp(0)
  updatedAt     DateTime?       @updatedAt @map("updated_at") @db.Timestamp(0)
  deletedAt     DateTime?       @map("deleted_at") @db.Timestamp(0)
  code          String?         @db.VarChar(40)
  email         String?         @db.VarChar(191)
  box_warehouse box_warehouse[]
  company       Company         @relation(fields: [companyId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("warehouses")
}

model Box {
  id             BigInt          @id @default(autoincrement())
  code           String          @db.VarChar(50)
  createdAt      DateTime?       @map("created_at") @db.Timestamp(0)
  updatedAt      DateTime?       @updatedAt @map("updated_at") @db.Timestamp(0)
  deletedAt      DateTime?       @map("deleted_at") @db.Timestamp(0)
  companyId      BigInt?         @map("company_id")
  boxProceedings BoxProceeding[]
  box_warehouse  box_warehouse[]
  company        Company?        @relation(fields: [companyId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("boxes")
}

model CorrespondenceType {
  id          BigInt    @id @default(autoincrement())
  name        String    @db.VarChar(191)
  companyId   Int       @map("company_id")
  description String    @db.VarChar(191)
  expiration  Int
  areaId      Int?      @map("area_id")
  createdAt   DateTime? @map("created_at") @db.Timestamp(0)
  updatedAt   DateTime? @updatedAt @map("updated_at") @db.Timestamp(0)
  deletedAt   DateTime? @map("deleted_at") @db.Timestamp(0)
  public      Boolean   @default(true)

  @@map("correspondence_types")
}

model Template {
  id          BigInt    @id @default(autoincrement())
  title       String    @db.VarChar(191)
  description String    @db.VarChar(191)
  content     String
  companyId   BigInt    @map("company_id")
  createdAt   DateTime? @map("created_at") @db.Timestamp(0)
  updatedAt   DateTime? @updatedAt @map("updated_at") @db.Timestamp(0)
  deletedAt   DateTime? @map("deleted_at") @db.Timestamp(0)
  company     Company   @relation(fields: [companyId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("templates")
}

model DocumentProceeding {
  id           BigInt     @id @default(autoincrement())
  documentId   BigInt     @map("document_id")
  proceedingId BigInt     @map("proceeding_id")
  consecutive  Int?
  createdAt    DateTime?  @map("created_at") @db.Timestamp(0)
  updatedAt    DateTime?  @updatedAt @map("updated_at") @db.Timestamp(0)
  deletedAt    DateTime?  @map("deleted_at") @db.Timestamp(0)
  document     Document   @relation(fields: [documentId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  proceeding   Proceeding @relation(fields: [proceedingId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("document_proceeding")
}

model BoxProceeding {
  id           BigInt     @id @default(autoincrement())
  createdAt    DateTime?  @map("created_at") @db.Timestamp(0)
  updatedAt    DateTime?  @updatedAt @map("updated_at") @db.Timestamp(0)
  boxId        BigInt     @map("box_id")
  proceedingId BigInt     @map("proceeding_id")
  deletedAt    DateTime?  @map("deleted_at") @db.Timestamp(0)
  folder       String?    @db.VarChar(191)
  book         String?    @db.VarChar(191)
  other        String?    @db.VarChar(191)
  box          Box        @relation(fields: [boxId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  proceeding   Proceeding @relation(fields: [proceedingId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("box_proceeding")
}

model ProceedingThread {
  id              BigInt     @id @default(autoincrement())
  proceedingId    BigInt     @map("proceeding_id")
  fromId          BigInt     @map("from_id")
  assignedId      BigInt?    @map("assigned_id")
  reason          String
  address         String     @db.VarChar(255)
  name            String     @db.VarChar(255)
  document        String     @db.VarChar(255)
  signed          String?
  warehouseSigned String?    @map("warehouse_signed")
  createdAt       DateTime?  @map("created_at") @db.Timestamp(0)
  updatedAt       DateTime?  @updatedAt @map("updated_at") @db.Timestamp(0)
  deletedAt       DateTime?  @map("deleted_at") @db.Timestamp(0)
  isFinished      Boolean    @default(false) @map("is_finished")
  assignedUser    User?      @relation("ProceedingThreadAssigned", fields: [assignedId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  fromUser        User       @relation("ProceedingThreadFrom", fields: [fromId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  proceeding      Proceeding @relation(fields: [proceedingId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("proceeding_threads")
}

model ExternalUser {
  id                      BigInt                   @id @default(autoincrement())
  email                   String                   @db.VarChar(191)
  phone                   String?                  @db.VarChar(40)
  dni                     String?                  @db.VarChar(191)
  name                    String                   @db.VarChar(191)
  lastName                String?                  @map("last_name") @db.VarChar(191)
  createdAt               DateTime?                @map("created_at") @db.Timestamp(0)
  updatedAt               DateTime?                @updatedAt @map("updated_at") @db.Timestamp(0)
  deletedAt               DateTime?                @map("deleted_at") @db.Timestamp(0)
  state                   String?                  @db.VarChar(191)
  city                    String?                  @db.VarChar(191)
  address                 String?                  @db.VarChar(191)
  companyId               BigInt?                  @map("company_id")
  password                String?                  @db.VarChar(255)
  rememberToken           String?                  @map("remember_token") @db.VarChar(100)
  externalUserProceedings ExternalUserProceeding[]
  company                 Company?                 @relation(fields: [companyId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("external_users")
}

model ExternalUserProceeding {
  id             BigInt       @id @default(autoincrement())
  externalUserId BigInt       @map("external_user_id")
  proceedingId   BigInt       @map("proceeding_id")
  createdAt      DateTime?    @map("created_at") @db.Timestamp(0)
  updatedAt      DateTime?    @updatedAt @map("updated_at") @db.Timestamp(0)
  externalUser   ExternalUser @relation(fields: [externalUserId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  proceeding     Proceeding   @relation(fields: [proceedingId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("external_user_proceeding")
}

model DocumentTextract {
  id         BigInt    @id @default(autoincrement())
  documentId BigInt    @map("document_id")
  job_id     String    @db.VarChar(191)
  finishedAt DateTime? @map("finished_at") @db.Timestamp(0)
  result     String?
  plain      String?
  createdAt  DateTime? @map("created_at") @db.Timestamp(0)
  updatedAt  DateTime? @updatedAt @map("updated_at") @db.Timestamp(0)
  deletedAt  DateTime? @map("deleted_at") @db.Timestamp(0)
  pages      Int       @default(0)
  document   Document  @relation(fields: [documentId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("document_textracts")
}

model SentEmail {
  id               Int                   @id @default(autoincrement())
  hash             String                @unique(map: "sent_emails_hash_unique") @db.Char(32)
  headers          String?
  subject          String?               @db.VarChar(255)
  content          String?
  opens            Int?
  clicks           Int?
  createdAt        DateTime?             @map("created_at") @db.Timestamp(0)
  updatedAt        DateTime?             @updatedAt @map("updated_at") @db.Timestamp(0)
  messageId        String?               @map("message_id") @db.VarChar(255)
  meta             String?
  recipientEmail   String?               @map("recipient_email") @db.VarChar(255)
  recipientName    String?               @map("recipient_name") @db.VarChar(255)
  senderEmail      String?               @map("sender_email") @db.VarChar(255)
  senderName       String?               @map("sender_name") @db.VarChar(255)
  clickedAt        DateTime?             @map("clicked_at") @db.Timestamp(0)
  openedAt         DateTime?             @map("opened_at") @db.Timestamp(0)
  correspondenceId BigInt?               @map("correspondence_id")
  correspondence   Correspondence?       @relation(fields: [correspondenceId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  urlClicks        SentEmailUrlClicked[]

  @@index([messageId], map: "sent_emails_message_id_index")
  @@map("sent_emails")
}

model SentEmailUrlClicked {
  id          Int       @id @default(autoincrement())
  sentEmailId Int       @map("sent_email_id")
  url         String?
  hash        String    @db.Char(32)
  clicks      Int       @default(1)
  createdAt   DateTime? @map("created_at") @db.Timestamp(0)
  updatedAt   DateTime? @updatedAt @map("updated_at") @db.Timestamp(0)
  sentEmail   SentEmail @relation(fields: [sentEmailId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@map("sent_emails_url_clicked")
}

model Permission {
  id                  BigInt               @id @default(autoincrement())
  name                String               @db.VarChar(191)
  guardName           String               @map("guard_name") @db.VarChar(191)
  createdAt           DateTime?            @map("created_at") @db.Timestamp(0)
  updatedAt           DateTime?            @updatedAt @map("updated_at") @db.Timestamp(0)
  permissionLevel     Int                  @default(1) @map("permission_level")
  modelHasPermissions ModelHasPermission[]
  roleHasPermissions  RoleHasPermission[]

  @@map("permissions")
}

model Role {
  id                 BigInt              @id @default(autoincrement())
  name               String              @db.VarChar(191)
  guardName          String              @map("guard_name") @db.VarChar(191)
  createdAt          DateTime?           @map("created_at") @db.Timestamp(0)
  updatedAt          DateTime?           @updatedAt @map("updated_at") @db.Timestamp(0)
  roleLevel          Int                 @default(1) @map("role_level")
  companyId          BigInt?             @map("company_id")
  modelHasRoles      ModelHasRole[]
  roleHasPermissions RoleHasPermission[]

  @@map("roles")
}

model ModelHasPermission {
  permissionId BigInt     @map("permission_id")
  modelType    String     @map("model_type") @db.VarChar(191)
  modelId      BigInt     @map("model_id")
  permission   Permission @relation(fields: [permissionId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([permissionId, modelId, modelType])
  @@map("model_has_permissions")
}

model ModelHasRole {
  roleId    BigInt @map("role_id")
  modelType String @map("model_type") @db.VarChar(191)
  modelId   BigInt @map("model_id")
  role      Role   @relation(fields: [roleId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([roleId, modelId, modelType])
  @@map("model_has_roles")
}

model RoleHasPermission {
  permissionId BigInt     @map("permission_id")
  roleId       BigInt     @map("role_id")
  permission   Permission @relation(fields: [permissionId], references: [id], onDelete: Cascade, onUpdate: NoAction)
  role         Role       @relation(fields: [roleId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([permissionId, roleId])
  @@map("role_has_permissions")
}

model Audit {
  id            BigInt    @id @default(autoincrement())
  userType      String?   @map("user_type") @db.VarChar(255)
  userId        BigInt?   @map("user_id")
  event         String    @db.VarChar(255)
  auditableType String    @map("auditable_type") @db.VarChar(255)
  auditableId   BigInt    @map("auditable_id")
  oldValues     String?   @map("old_values")
  newValues     String?   @map("new_values")
  url           String?
  ipAddress     String?   @map("ip_address") @db.Inet
  userAgent     String?   @map("user_agent") @db.VarChar(1023)
  tags          String?   @db.VarChar(255)
  createdAt     DateTime? @map("created_at") @db.Timestamp(0)
  updatedAt     DateTime? @updatedAt @map("updated_at") @db.Timestamp(0)

  @@index([auditableType, auditableId], map: "audits_auditable_type_auditable_id_index")
  @@index([userId, userType], map: "audits_user_id_user_type_index")
  @@map("audits")
}

model Notification {
  id             String    @id @default(uuid()) @db.Uuid
  type           String    @db.VarChar(191)
  notifiableType String    @map("notifiable_type") @db.VarChar(191)
  notifiableId   BigInt    @map("notifiable_id")
  data           String
  readAt         DateTime? @map("read_at") @db.Timestamp(0)
  createdAt      DateTime? @map("created_at") @db.Timestamp(0)
  updatedAt      DateTime? @updatedAt @map("updated_at") @db.Timestamp(0)

  @@map("notifications")
}

model Metric {
  id        BigInt    @id @default(autoincrement())
  modelName String    @map("model_name") @db.VarChar(100)
  modelId   BigInt    @map("model_id")
  count     Float
  date      DateTime  @db.Date
  period    String    @db.VarChar(50)
  createdAt DateTime? @map("created_at") @db.Timestamp(0)
  updatedAt DateTime? @updatedAt @map("updated_at") @db.Timestamp(0)
  deletedAt DateTime? @map("deleted_at") @db.Timestamp(0)

  @@map("metrics")
}

model Session {
  id           String  @id @db.VarChar(255)
  userId       BigInt? @map("user_id")
  ipAddress    String? @map("ip_address") @db.VarChar(45)
  userAgent    String? @map("user_agent")
  payload      String
  lastActivity Int     @map("last_activity")

  @@index([lastActivity], map: "sessions_last_activity_index")
  @@index([userId], map: "sessions_user_id_index")
  @@map("sessions")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model PasswordReset {
  email     String    @db.VarChar(191)
  token     String    @db.VarChar(191)
  createdAt DateTime? @map("created_at") @db.Timestamp(0)

  @@map("password_resets")
  @@ignore
}

model FailedJob {
  id         BigInt   @id @default(autoincrement())
  connection String
  queue      String
  payload    String
  exception  String
  failedAt   DateTime @default(now()) @map("failed_at") @db.Timestamp(0)

  @@map("failed_jobs")
}

model action_events {
  id              BigInt    @id @default(autoincrement())
  batch_id        String    @db.Char(36)
  user_id         BigInt
  name            String    @db.VarChar(191)
  actionable_type String    @db.VarChar(191)
  actionable_id   BigInt
  target_type     String    @db.VarChar(191)
  target_id       BigInt
  model_type      String    @db.VarChar(191)
  model_id        BigInt?
  fields          String
  status          String    @default("running") @db.VarChar(25)
  exception       String
  created_at      DateTime? @db.Timestamp(0)
  updated_at      DateTime? @db.Timestamp(0)
  original        String?
  changes         String?
}

model box_warehouse {
  id           BigInt    @id @default(autoincrement())
  warehouse_id BigInt
  box_id       BigInt
  created_at   DateTime? @db.Timestamp(0)
  updated_at   DateTime? @db.Timestamp(0)
  deleted_at   DateTime? @db.Timestamp(0)
  island       String?   @db.VarChar(191)
  shelving     String?   @db.VarChar(191)
  shelf        String?   @db.VarChar(191)
  boxes        Box       @relation(fields: [box_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  warehouses   Warehouse @relation(fields: [warehouse_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model correspondence_document {
  id                BigInt         @id @default(autoincrement())
  correspondence_id BigInt
  document_id       BigInt
  created_at        DateTime?      @db.Timestamp(0)
  updated_at        DateTime?      @db.Timestamp(0)
  deleted_at        DateTime?      @db.Timestamp(0)
  correspondences   Correspondence @relation(fields: [correspondence_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  documents         Document       @relation(fields: [document_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model migrations {
  id        Int    @id @default(autoincrement())
  migration String @db.VarChar(191)
  batch     Int
}

model password_reset_tokens {
  email      String    @id @db.VarChar(255)
  token      String    @db.VarChar(255)
  created_at DateTime? @db.Timestamp(0)
}

model state_histories {
  id                BigInt    @id @default(autoincrement())
  model_type        String    @db.VarChar(191)
  model_id          BigInt
  field             String    @db.VarChar(191)
  from              String?   @db.VarChar(191)
  to                String?   @db.VarChar(191)
  custom_properties Json?     @db.Json
  responsible_type  String?   @db.VarChar(191)
  responsible_id    BigInt?
  created_at        DateTime? @db.Timestamp(0)
  updated_at        DateTime? @db.Timestamp(0)
}

model visits {
  id            BigInt    @id @default(autoincrement())
  primary_key   String    @db.VarChar(191)
  secondary_key String?   @db.VarChar(191)
  score         BigInt
  list          Json?     @db.Json
  expired_at    DateTime? @db.Timestamp(0)
  created_at    DateTime? @db.Timestamp(0)
  updated_at    DateTime? @db.Timestamp(0)
}
